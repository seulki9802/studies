<!DOCTYPE html>
<html>
<head lang="en">
  <meta charset="UTF-8">
  <script>
    window.onload = function () {
      var canvas = document.getElementById('myCanvas');
      var ctx = canvas.getContext('2d');
      var font = '14px sans-serif';
      var hasInput = false;

      canvas.onclick = function(e) {
        // if (hasInput) return;
        addInput(e.clientX, e.clientY);
      }

      function addInput(x, y) {
        var input = document.createElement('input');

        input.id = 'test'
        input.type = 'text';
        input.style.position = 'fixed';
        input.style.left = (x - 4) + 'px';
        input.style.top = (y - 4) + 'px';

        input.onkeydown = handleEnter;

        document.body.appendChild(input);

        input.focus();

        // hasInput = true;
      }

      function handleEnter(e) {
        var keyCode = e.keyCode;
        if (keyCode === 13) {
          drawText(this.value, parseInt(this.style.left, 10), parseInt(this.style.top, 10));
          var a = document.getElementById('test');
          a.remove();
          hasInput = false;
        }
      }

      function drawText(txt, x, y) {
        ctx.textBaseline = 'top';
        ctx.textAlign = 'left';
        ctx.font = font;
        ctx.fillText(txt, x - 4, y - 4);
      }
    }
  </script>
</head>
<body>
  <canvas id="myCanvas" width="300px" height="300px" style="border: solid 1px #000000;" />
</body>
</html>
